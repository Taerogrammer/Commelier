# 🍷 코믈리에 (Commelier)  
> 가상 자산 실전 감각을 기를 수 있는 iOS 기반 모의 코인 투자 앱 💸📈

`코믈리에`는 실제 돈 없이도 가상 화폐 투자 흐름을 익힐 수 있는 iOS 기반 모의 투자 앱입니다. 실시간 코인 시세를 기반으로 매매를 연습하고, 나만의 포트폴리오를 분석하며 투자 감각을 키울 수 있도록 하였습니다.

<br><br>

## 📺 스크린샷 (Screenshots)

| 거래소 | 시세 상세 | 가상 매수 | 포트폴리오 |
|:--:|:--:|:--:|:--:|
| ![](./screenshot1.png) | ![](./screenshot2.png) | ![](./screenshot3.png) | ![](./screenshot4.png) |

<br>

- **거래소**  
  WebSocket을 기반으로 실시간 코인 시세를 수신하며, 전일 대비 변동률, 거래대금 등 주요 지표를 함께 제공합니다.  
  사용자는 상승률, 거래량 등의 기준으로 리스트를 정렬할 수 있어, 빠르게 시장 흐름을 파악하고 코인을 탐색할 수 있습니다.

- **시세 상세**  
  선택한 코인의 시세 그래프와 함께, 시가·고가·저가·전일 대비 등 종목의 핵심 정보를 제공하는 화면입니다.  
  그래프는 실시간 시세 변동을 반영하며, 사용자는 시세 흐름과 가격 지표를 종합적으로 분석할 수 있습니다.  
  매수·매도 버튼을 통해 즉시 가상 매수·매도 화면으로 연결되도록 구성했습니다.

- **가상 매수·매도**  
  사용자가 입력한 금액을 기준으로, 현재 시세에 따라 실시간으로 환산하여 가상으로 코인을 사고팔 수 있습니다.  
  모든 계산은 `Decimal` 타입 기반으로 처리되어, 소수점 오차 없이 높은 정밀도로 환율 및 수익률을 계산할 수 있습니다.  
  매매 결과는 포트폴리오에 자동 반영되며, 누적 평균 매수가를 기준으로 손익이 계산됩니다.

- **포트폴리오**  
  전체 자산의 평가 금액, 수익률, 자산 비중 등을 시각적으로 보여주는 종합 자산 분석 화면입니다.  
  현재 보유 중인 코인의 총 평가 금액과 총 손익을 실시간으로 계산하며, Pie Chart를 통해 자산 구성 비율을 한눈에 파악할 수 있습니다.  
  또한, `거래 내역`을 통해 어떤 코인을 언제 얼마나 매수했는지 추적할 수 있으며, 이를 기반으로 전체 투자 흐름을 점검할 수 있도록 구성했습니다.

<br>

## ✨ 주요 기능 (Features)

| 기능명 | 설명 |
|---|---|
| 💸 **모의 투자 기능** | 실제 돈 없이도 코인을 사고팔며 실전처럼 트레이딩 연습 가능 |
| 📈 **실시간 시세 반영** | WebSocket을 통한 실시간 코인 시세 반영 및 빠른 매매 체험 제공 |
| 📊 **포트폴리오 관리** | 보유 자산의 수익률, 평가 금액, 비중 등을 시각화하여 한눈에 확인 가능 |
| 🔥 **인기 코인 & 키워드** | 현재 트렌디한 코인과 키워드를 실시간으로 확인하여 시장 흐름 파악 가능 |
| 🌓 **라이트/다크 모드** | 사용자의 기호에 맞게 UI 테마를 자동 혹은 수동으로 변경 가능 |
| ⚠️ **네트워크 상태 알림** | 연결 오류 발생 시 원인 및 해결 방향을 사용자에게 직관적으로 안내 |

<br>

## 🛠️ 기술 스택 및 아키텍처 (Tech Stack & Architecture)

<img src="https://github.com/user-attachments/assets/09e5fae2-4594-4021-bcd3-461782cfd282" width="600" />

<br>

### Architecture & Design Pattern
- **MVVM (Input/Output)**
- **Repository Pattern, Router Pattern, UseCase**
- **Factory Method Pattern**
- **Dependency Injection (DI)**

### Frameworks & Libraries
| 구분 | 기술 |
|---|---|
| **UI** | UIKit, SwiftUI (일부), SnapKit |
| **Asynchronous** | Combine, RxSwift, RxCocoa |
| **Network** | Alamofire, WebSocket |
| **Database** | Realm |
| **Chart** | DGCharts, Charts |
| **Image Caching**| Kingfisher |
| **Utility** | NumberterKit (자체 제작) |

<br>

## ⚙️ 주요 설계 상세

### 1. MVVM with Input/Output
InOut 패턴을 적용하여 ViewModel의 입력과 출력을 명확히 분리하고, RxSwift와 Combine을 활용해 비동기 데이터 흐름을 관리함으로써 코드의 가독성과 테스트 용이성을 높였습니다.

### 2. Factory를 통한 객체 생성 및 의존성 주입
Factory Method Pattern을 통해 ViewModel, UseCase, Repository 등 주요 객체의 생성 책임을 분리했습니다. 이는 의존성 주입(DI)을 용이하게 하여 SRP, OCP, DIP와 같은 SOLID 원칙을 ���족하는 유연한 구조를 만들었습니다.

### 3. Realm 데이터 정규화
모의 투자 내역, 자산 정보 등을 Realm에 저장 시, 데이터 정규화를 적용하여 중복을 최소화하고 데이터 무결성을 확보했습니다. 예를 들어, 거래 기록은 코인 메타 정보를 직접 소유하는 대신 ID로 참조하여 데이터 변경 시 일관성을 유지하도록 설계했습니다.

<br>

## 🤔 트러블 슈팅 (Problem Solving)

### 1. WebSocket 중복 구독 및 결합도 문제 해결
- **문제 상황:** 여러 ViewModel에서 `WebSocketManager.shared` 싱글톤 객체를 직접 참조하면서 강한 결합도가 발생했습니다. 이로 인해 특정 ViewModel의 변경이 다른 부분에 영향을 미칠 수 있었고, Mock 객체를 사용한 단위 테스트 작성이 어려웠습니다.
- **해결 과정:** 의존성 역전 원칙(DIP)과 의존성 주입(DI)을 도입했습니다. ViewModel이 구체 클래스(`WebSocketManager`)가 아닌 추상 프로토콜(`WebSocketProvider`)에 의존하도록 변경하고, 외부(Factory)에서 실제 객체를 주입하는 구조로 개선했습니다.
- **결과:** ViewModel과 WebSocket 모듈 간의 결합도를 낮춰 **유지보수성과 확장성**을 높였습니다. 또한 Mock 객체 주입이 가능해져 **단위 테스트의 용이성**을 확보했습니다.

### 2. 금융 계산의 정확성 확보
- **문제 상황:** 코인 시세, 수익률 등 소수점 연산이 많은 금융 데이터에 `Double` 타입을 사용할 ��우, 부동소수점 방식으로 인한 미세한 오차가 발생할 수 있었습니다. 이는 투자 앱의 신뢰도를 저하시킬 수 있는 잠재적 리스크였습니다.
- **해결 과정:** 고정 소수점 연산을 지원하여 금융 계산에 적합한 `Decimal` 타입을 프로젝트 전반에 도입했습니다. `Double` 대비 연산 속도는 다소 느리지만, 계산의 정확성을 보장하는 것이 더 중요하다고 판단했습니다. Realm 데이터베이스에도 `RLMDecimal128` 타입으로 안전하게 저장되도록 구현했습니다.
- **결과:** **데이터의 정밀도**를 확보하여 모의 투자 앱으로서의 **신뢰성을 강화**했습니다.

### 3. 숫자 포맷팅 유틸리티 개발
- **문제 상황:** 코인 가격(소수점 2~4자리), 수량(소수점 8자리), 수익률(%) 등 다양한 숫자 형식을 처리해야 했습니다. `DecimalFormatter`만으로는 Int64, Decimal, String 간의 복잡한 변환 및 포맷팅 로직이 반복적으로 사용되어 코드 가독성을 해쳤습니다.
- **해결 과정:** 숫자 데이터 처리를 전담하는 경량 유틸리티 라이브러리 **`NumberterKit`**을 직접 개발했습니다. 복잡한 변환 및 포맷팅 로직을 캡슐화하여 재사용성을 높이고, Swift Package Manager를 통해 모듈화하여 다른 프로젝트에서도 사용할 수 있도록 설계했습니다.
- **결과:** 반복 코드를 제거하고 **코드의 가독성과 유지보수성**을 크게 향상시켰습니다.

<br><br>

## 🗓️ 프로젝트 정보
- **개발 기간:** 2025.03.06 ~ 2025.04.10
- **개발 인원:** 1인 (기획, 디자인, 개발)
- **타겟 플랫폼:** iOS (iPhone)
- **배포:** App Store
